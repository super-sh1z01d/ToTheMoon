# Правила и соглашения для Code Assistant

Этот документ определяет правила, которым ты, как Code Assistant, должен неукоснительно следовать при генерации и модификации кода в проекте "ToTheMoon".

**Главный документ, определяющий технические решения – `vision.md`. Ты должен действовать в строгом соответствии с ним.**

## 1. Основные принципы

1.  **Простота и Надежность:** Это наш ключевой принцип. Не предлагай и не используй сложные паттерны, библиотеки или архитектурные решения, если задача может быть решена проще. Избегай оверинжиниринга.
2.  **Следование `vision.md`:** Всегда обращайся к `vision.md` для понимания стека, архитектуры, структуры проекта и других технических деталей. Не дублируй информацию из него, а используй его как первоисточник.
3.  **Предсказуемость:** Твои решения должны быть очевидными и следовать уже принятым в проекте практикам.

## 2. Работа со структурой проекта

- **Соблюдай структуру:** Всегда размещай файлы в директориях, определенных в разделе 3 документа `vision.md`.
- **Новая логика:**
  - Новую бизнес-логику бэкенда помещай в `backend/app/services/`.
  - Новые API эндпоинты — в `backend/app/api/`.
  - Новые UI-компоненты — в `frontend/src/components/`.

## 3. Backend (Python/FastAPI)

- **Асинхронность:** Весь I/O-bound код (работа с БД, внешними API) должен быть асинхронным (`async/await`).
- **База данных:** Для всех взаимодействий с БД используй ORM `SQLAlchemy` и модели `SQLModel`, как указано в `vision.md`.
- **Конфигурация:** Никогда не хардкодь конфигурационные параметры (ключи API, адреса). Используй подход с переменными окружения, описанный в `vision.md`.
- **Логгирование:** Следуй правилам логирования из `vision.md`. Используй стандартный модуль `logging`.
- **Типизация:** Код должен быть полностью типизирован. Используй стандартные тайп-хинты Python.

## 4. Frontend (TypeScript/React)

- **Компоненты:** Создавай только функциональные компоненты с использованием хуков.
- **UI-библиотека:** По максимуму используй готовые компоненты из `Mantine UI`, как это определено в `vision.md`.
- **Типизация:** Весь код должен быть строго типизирован. Определяй интерфейсы для пропсов компонентов и ответов API.
- **Состояние:** Для управления состоянием используй встроенные хуки React (`useState`, `useContext`) или `Zustand`, если потребуется более сложное решение. Не вводи Redux или другие сложные менеджеры состояний.

## 5. Тестирование

- При добавлении новой бизнес-логики (особенно в `backend/app/services/`) всегда предлагай создать или обновить юнит-тесты в директории `backend/tests/`.

## 6. Что запрещено

- **Не использовать Docker:** Проект сознательно не использует Docker. Не предлагай решения, связанные с ним.
- **Не добавлять новые зависимости:** Не устанавливай новые библиотеки или пакеты без явного разрешения. Используй только тот стек, что определен в `vision.md`.
- **Не изменять CI/CD и деплой:** Не вноси изменения в скрипт `scripts/deploy.sh` или в конфигурацию веб-сервера.
- **Не отступать от `vision.md`:** Любое предложение, противоречащее `vision.md`, будет отклонено.
