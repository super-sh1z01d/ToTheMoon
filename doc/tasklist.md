# –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (ToTheMoon2)

–≠—Ç–æ—Ç —Ñ–∞–π–ª ‚Äî –∂–∏–≤–æ–π —á–µ–∫–ª–∏—Å—Ç –∏—Ç–µ—Ä–∞—Ü–∏–π. –ö–∞–∂–¥–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç —Ä–∞–±–æ—á–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏ –ø–æ–¥–ª–µ–∂–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–µ. –î–µ—Ç–∞–ª–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ ‚Äî –≤ `../vision.md`.

## –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∏—Ç–µ—Ä–∞—Ü–∏—è–º

| –ò—Ç–µ—Ä–∞—Ü–∏—è | –ù–∞–∑–≤–∞–Ω–∏–µ                                      | –°—Ç–∞—Ç—É—Å |
|---------:|-----------------------------------------------|:------:|
| I1       | –ë—É—Ç—Å—Ç—Ä–∞–ø API, –∫–æ–Ω—Ñ–∏–≥, –ë–î, health              | ‚úÖ |
| I2       | –ú–æ–¥–µ–ª–∏ –ë–î –∏ –º–∏–≥—Ä–∞—Ü–∏–∏                          | ‚è≥ |
| I3       | –ë–∞–∑–æ–≤—ã–µ API –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤                       | ‚è≥ |
| I4       | –ò–Ω–∂–µ—Å—Ç WebSocket (PumpPortal)                 | ‚è≥ |
| I5       | –ö–ª–∏–µ–Ω—Ç Birdeye —Å TTL-–∫—ç—à–µ–º                    | ‚è≥ |
| I6       | –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏ Initial‚ÜíActive                  | ‚è≥ |
| I7       | –°–∫–æ—Ä–∏–Ω–≥: –º–µ—Ç—Ä–∏–∫–∏, EWMA, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ            | üü¶ |
| I8       | –ê–¥–º–∏–Ω–∫–∞: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ—Å–æ–≤ –∏ –ø–æ—Ä–æ–≥–æ–≤            | üü¶ |
| I9       | UI: —Å–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤ (–º–∏–Ω–∏–º—É–º)                  | üü¶ |
| I10      | Degrade –¥–æ Archived + –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏         | üü¶ |
| I11      | –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –±–æ—Ç–∞ (bot-config JSON)            | üü¶ |
| I12      | –î–µ–ø–ª–æ–π: systemd + Nginx                       | üü¶ |

–õ–µ–≥–µ–Ω–¥–∞ —Å—Ç–∞—Ç—É—Å–æ–≤: üü¶ Planned ¬∑ üöß In¬†Progress ¬∑ ‚úÖ Done ¬∑ ‚è≥ Waiting ¬∑ ‚ùå Blocked

---

## –ü–ª–∞–Ω –∏—Ç–µ—Ä–∞—Ü–∏–π –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

- [x] I1 –ë—É—Ç—Å—Ç—Ä–∞–ø API, –∫–æ–Ω—Ñ–∏–≥, –ë–î, health
  - –¶–µ–ª—å: –∫–∞—Ä–∫–∞—Å —Å–µ—Ä–≤–∏—Å–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ PostgreSQL –∏ `/health`.
  - –°–æ—Å—Ç–∞–≤: FastAPI, –∫–æ–Ω—Ñ–∏–≥ (Pydantic Settings), –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î, Alembic init.
  - –ü—Ä–æ–≤–µ—Ä–∫–∞:
    - –ó–∞–ø—É—Å–∫: `uvicorn app.main:app --reload`
    - `curl http://localhost:8000/health` ‚Üí `{ "status": "ok" }`
    - `alembic upgrade head` –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ (–ø—É—Å—Ç–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è).

- [ ] I2 –ú–æ–¥–µ–ª–∏ –ë–î –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
  - –¶–µ–ª—å: —Ç–∞–±–ª–∏—Ü—ã `tokens`, `pools`, `token_snapshots`, `pool_snapshots`, `token_scores`, `settings`.
  - –°–æ—Å—Ç–∞–≤: SQLAlchemy –º–æ–¥–µ–ª–∏, –∏–Ω–¥–µ–∫—Å—ã/—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏, Alembic –º–∏–≥—Ä–∞—Ü–∏–∏.
  - –ü—Ä–æ–≤–µ—Ä–∫–∞:
    - `alembic upgrade head` —Å–æ–∑–¥–∞—ë—Ç —Å—Ö–µ–º—É.
    - `pytest -q` –¥–ª—è smoke-—Ç–µ—Å—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—á—Ç–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π (—Ñ–µ–π–∫–æ–≤–∞—è –ë–î).

- [ ] I3 –ë–∞–∑–æ–≤—ã–µ API –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤
  - –¶–µ–ª—å: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä—É—á–∫–∏ –¥–ª—è —á—Ç–µ–Ω–∏—è/—Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ (dev) –∏ —Å–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤.
  - –°–æ—Å—Ç–∞–≤: `GET /tokens`, `GET /tokens/{address}`, `POST /dev/tokens` (—Ç–æ–ª—å–∫–æ dev).
  - –ü—Ä–æ–≤–µ—Ä–∫–∞:
    - `curl -X POST /dev/tokens -d '{"address":"X"}'` ‚Üí 201, –≤ –ë–î –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å (status=Initial).
    - `curl /tokens` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫.

- [ ] I4 –ò–Ω–∂–µ—Å—Ç WebSocket (PumpPortal)
  - –¶–µ–ª—å: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ —Å–æ–±—ã—Ç–∏—è–º `subscribeMigration`.
  - –°–æ—Å—Ç–∞–≤: `services/pumpportal.py` (–∞–≤—Ç–æ–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ), –∑–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ.
  - –ü—Ä–æ–≤–µ—Ä–∫–∞:
    - –õ–æ–≥–∏ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç —É—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.
    - –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç–æ–∫–µ–Ω (–∏–ª–∏ no-op –ø—Ä–∏ –¥—É–±–ª–µ).

- [ ] I5 –ö–ª–∏–µ–Ω—Ç Birdeye —Å TTL-–∫—ç—à–µ–º
  - –¶–µ–ª—å: –ø–æ–ª—É—á–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø–æ —Ç–æ–∫–µ–Ω–∞–º/–ø—É–ª–∞–º —Å —ç–∫–æ–Ω–æ–º–∏–µ–π –∑–∞–ø—Ä–æ—Å–æ–≤.
  - –°–æ—Å—Ç–∞–≤: `services/birdeye.py` –Ω–∞ `aiohttp`, TTL-–∫—ç—à 15‚Äì60—Å, —Ä–µ—Ç—Ä–∞–∏ —Å backoff+jitter, –≥–ª–æ–±–∞–ª—å–Ω—ã–π Semaphore.
  - –ü—Ä–æ–≤–µ—Ä–∫–∞:
    - –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç –∫–ª–∏–µ–Ω—Ç–∞ —Å —Ñ–µ–π–∫–æ–≤—ã–º HTTP-—Å–µ—Ä–≤–µ—Ä–æ–º/–º–æ–∫–æ–º: –∫—ç—à –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, —Ä–µ—Ç—Ä–∞–∏ –Ω–∞ 5xx.

- [ ] I6 –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏ Initial‚ÜíActive
  - –¶–µ–ª—å: –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –ø–µ—Ä–µ–≤–æ–¥ Initial‚ÜíActive –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π (–Ω–∞–ª–∏—á–∏–µ –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—É–ª–æ–≤).
  - –°–æ—Å—Ç–∞–≤: `services/scheduler.py`, –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏, –ø—Ä–∞–≤–∏–ª–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `activated_at`.
  - –ü—Ä–æ–≤–µ—Ä–∫–∞:
    - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç —Å –ø–æ–¥–º–µ–Ω–æ–π Birdeye: —Ç–æ–∫–µ–Ω –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ Active.

- [ ] I7 –°–∫–æ—Ä–∏–Ω–≥: –º–µ—Ç—Ä–∏–∫–∏, EWMA, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
  - –¶–µ–ª—å: —Ä–∞—Å—á—ë—Ç Tx_Accel, Vol_Momentum, Holder_Growth, Orderflow_Imbalance, –≤–∑–≤–µ—à–∏–≤–∞–Ω–∏–µ –∏ EWMA.
  - –°–æ—Å—Ç–∞–≤: `services/scoring.py`, –∑–∞–ø–∏—Å—å –≤ `token_scores` –∏ `tokens.last_score_value`.
  - –ü—Ä–æ–≤–µ—Ä–∫–∞:
    - –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –ø–æ —Ñ–æ—Ä–º—É–ª–∞–º –∏ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—é –Ω–∞ —Ñ–∏–∫—Ç–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

- [ ] I8 –ê–¥–º–∏–Ω–∫–∞: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ—Å–æ–≤ –∏ –ø–æ—Ä–æ–≥–æ–≤
  - –¶–µ–ª—å: –º–µ–Ω—è—Ç—å –≤–µ—Å–∞/–ø–æ—Ä–æ–≥ –±–µ–∑ —Ä–µ—Å—Ç–∞—Ä—Ç–∞.
  - –°–æ—Å—Ç–∞–≤: `GET/PUT /admin/settings`, –≤–∞–ª–∏–¥–∞—Ü–∏—è Pydantic, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `settings`.
  - –ü—Ä–æ–≤–µ—Ä–∫–∞:
    - `PUT /admin/settings` –º–µ–Ω—è–µ—Ç –≤–µ—Å–∞; –ø–µ—Ä–µ—Ä–∞—Å—á—ë—Ç —Å–∫–æ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

- [ ] I9 UI: —Å–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤ (–º–∏–Ω–∏–º—É–º)
  - –¶–µ–ª—å: –ø—Ä–æ—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ —Å –∫–ª—é—á–µ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ —Å–∫–æ—Ä–æ–º.
  - –°–æ—Å—Ç–∞–≤: Jinja2 —à–∞–±–ª–æ–Ω `index.html`, –ø–∞–≥–∏–Ω–∞—Ü–∏—è/—Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –º–∏–Ω–∏–º—É–º—É.
  - –ü—Ä–æ–≤–µ—Ä–∫–∞:
    - –û—Ç–∫—Ä—ã–≤–∞–µ–º `/` ‚Äî –≤–∏–¥–∏–º —Ç–∞–±–ª–∏—Ü—É; –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å API.

- [ ] I10 Degrade –¥–æ Archived + –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
  - –¶–µ–ª—å: –ø–æ–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏ –Ω–∏–∑–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ N –ø—Ä–æ–≤–µ—Ä–æ–∫; —Ä–µ–≥—É–ª—è—Ä–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–Ω–∞–ø—à–æ—Ç–æ–≤.
  - –°–æ—Å—Ç–∞–≤: –ø—Ä–∞–≤–∏–ª–∞ –≤ `scheduler.py`, –¥–∂–æ–±–∞ –æ—á–∏—Å—Ç–∫–∏ (—Ä–∞–∑ –≤ —Å—É—Ç–∫–∏).
  - –ü—Ä–æ–≤–µ—Ä–∫–∞:
    - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç: –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–∫–∞—Ö —Ç–æ–∫–µ–Ω —É—Ö–æ–¥–∏—Ç –≤ Archived; —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ —É–¥–∞–ª—è—é—Ç—Å—è.

- [ ] I11 –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –±–æ—Ç–∞ (bot-config JSON)
  - –¶–µ–ª—å: –æ—Ç–¥–∞—Ç—å –±–æ—Ç—É –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤/–ø—É–ª–æ–≤.
  - –°–æ—Å—Ç–∞–≤: `GET /export/bot-config` ‚Äî JSON —Å–æ —Å–ø–∏—Å–∫–æ–º –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤, –ø—É–ª–æ–≤ –∏ –º–µ—Ç—Ä–∏–∫.
  - –ü—Ä–æ–≤–µ—Ä–∫–∞:
    - `curl /export/bot-config` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–π JSON; —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ `last_score_value`.

- [ ] I12 –î–µ–ø–ª–æ–π: systemd + Nginx
  - –¶–µ–ª—å: –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –±–µ–∑ Docker.
  - –°–æ—Å—Ç–∞–≤: unit-—Ñ–∞–π–ª systemd, –±–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥ Nginx, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
  - –ü—Ä–æ–≤–µ—Ä–∫–∞:
    - `systemctl status tothemoon-api` ‚Äî –∞–∫—Ç–∏–≤–µ–Ω; –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –¥–æ–º–µ–Ω.

---

–ü–æ–¥—Å–∫–∞–∑–∫–∏
- –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å –≤ —Ç–∞–±–ª–∏—Ü–µ –≤—ã—à–µ.
- –î–µ—Ä–∂–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–∞–ª–µ–Ω—å–∫–∏–º–∏; –ø–æ–∫—Ä—ã–≤–∞–π—Ç–µ —Ç–µ—Å—Ç–∞–º–∏ –∫—Ä–∏—Ç–∏—á–Ω—É—é –ª–æ–≥–∏–∫—É.
- –ü–æ –≤—Å–µ–º –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–º –≤–æ–ø—Ä–æ—Å–∞–º –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ `../vision.md`.
