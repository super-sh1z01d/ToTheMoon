# Инструкция по развертыванию на Ubuntu

Это пошаговое руководство для запуска приложения "ToTheMoon" на чистом сервере с Ubuntu.

Просто копируйте и вставляйте команды в терминал шаг за шагом.

### Шаг 1: Обновление системы и установка зависимостей

Сначала обновим список пакетов и установим все необходимое: `git` для скачивания проекта, `python3-pip` для бэкенда, `nodejs` и `npm` для фронтенда, и `nginx` в качестве веб-сервера.

```bash
sudo apt update && sudo apt upgrade -y
sudo apt install -y git python3-pip nodejs npm nginx
```

### Шаг 2: Клонирование репозитория

Теперь скачаем код проекта с GitHub и перейдем в созданную директорию.

```bash
git clone https://github.com/super-sh1z01d/ToTheMoon.git
cd ToTheMoon
```

### Шаг 3: Создание файла конфигурации

Приложению требуется ключ для API Birdeye. Мы скопируем пример файла конфигурации и затем вам нужно будет его отредактировать, вставив свой ключ.

1.  Скопируйте файл:
    ```bash
    cp .env.example .env
    ```
2.  Откройте файл для редактирования с помощью простого текстового редактора `nano`:
    ```bash
    nano .env
    ```
3.  В открывшемся редакторе найдите строку `BIRDEYE_API_KEY="your_api_key"` и замените `your_api_key` на ваш реальный ключ. 
4.  Нажмите `Ctrl+X`, затем `Y` и `Enter`, чтобы сохранить файл и выйти из редактора.

### Шаг 4: Запуск скрипта развертывания

Теперь запустим наш скрипт, который сделает большую часть работы: установит все зависимости проекта, соберет фронтенд и запустит бэкенд.

```bash
chmod +x scripts/deploy.sh
./scripts/deploy.sh
```

После выполнения этого шага бэкенд уже будет запущен в фоновом режиме.

### Шаг 5: Настройка веб-сервера Nginx

Осталось настроить Nginx, чтобы он правильно отображал наш сайт и перенаправлял запросы к бэкенду.

1.  Скопируйте наш пример конфигурации в директорию Nginx:
    ```bash
    sudo cp nginx.example.conf /etc/nginx/sites-available/tothemoon
    ```
2.  **Важно:** Теперь нам нужно указать в этой конфигурации правильный путь к проекту. Следующая команда сделает это автоматически, используя ваш текущий путь:
    ```bash
    sudo sed -i "s|/path/to/your/project|$(pwd)|g" /etc/nginx/sites-available/tothemoon
    ```
3.  Активируйте новую конфигурацию, создав на нее символическую ссылку:
    ```bash
    sudo ln -s /etc/nginx/sites-available/tothemoon /etc/nginx/sites-enabled/
    ```
4.  Проверьте, что в конфигурации нет синтаксических ошибок:
    ```bash
    sudo nginx -t
    ```
    Если вы видите сообщение `syntax is ok`, все в порядке.

5.  Перезапустите Nginx, чтобы применить изменения:
    ```bash
    sudo systemctl restart nginx
    ```

### Шаг 6: Готово!

Приложение полностью настроено и запущено.

Откройте веб-браузер и перейдите по IP-адресу вашего сервера. Вы должны увидеть интерфейс "ToTheMoon Scanner".
